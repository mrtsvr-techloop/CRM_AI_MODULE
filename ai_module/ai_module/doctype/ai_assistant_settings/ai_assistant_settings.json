{
	"name": "AI Assistant Settings",
	"module": "AI Module",
	"doctype": "DocType",
	"custom": 0,
	"istable": 0,
	"is_tree": 0,
	"editable_grid": 0,
	"track_changes": 0,
	"quick_entry": 0,
	"allow_rename": 0,
	"allow_import": 0,
	"issingle": 1,
	"allow_guest_to_view": 0,
	"title_field": "instructions",
	"fields": [
		{
			"fieldname": "use_settings_override",
			"label": "Use this DocType for configuration",
			"fieldtype": "Check",
			"default": 0,
			"description": "When enabled, values saved here override environment"
		},
		{
			"fieldname": "assistant_name",
			"label": "Assistant Name",
			"fieldtype": "Data",
			"read_only": 1,
			"description": "Display name for the Assistant (from environment)"
		},
		{
			"fieldname": "section_env",
			"label": "Environment",
			"fieldtype": "Section Break"
		},
		{
			"fieldname": "model",
			"label": "Model",
			"fieldtype": "Data",
			"read_only": 1,
			"description": "Effective model used (from env/conf or default)"
		},
		{
			"fieldname": "project",
			"label": "Project",
			"fieldtype": "Data",
			"read_only": 1,
			"description": "Provider project (from env/conf)"
		},
		{
			"fieldname": "org_id",
			"label": "Organization ID",
			"fieldtype": "Data",
			"read_only": 1,
			"description": "Provider organization (from env/conf)"
		},
		{
			"fieldname": "base_url",
			"label": "Base URL (removed)",
			"fieldtype": "Data",
			"read_only": 1,
			"hidden": 1,
			"description": "Deprecated"
		},
		{
			"fieldname": "api_key_present",
			"label": "OPENAI_API_KEY Present",
			"fieldtype": "Check",
			"read_only": 1,
			"description": "Indicates whether an API key is set in the environment"
		},
		{
			"fieldname": "assistant_id_legacy",
			"label": "Assistant ID (Legacy)",
			"fieldtype": "Data",
			"read_only": 1,
			"hidden": 1,
			"description": "Deprecated field for legacy OpenAI Threads."
		},
		{
			"fieldname": "default_model",
			"label": "Default Model (removed)",
			"fieldtype": "Data",
			"read_only": 1,
			"hidden": 1,
			"description": "Deprecated"
		},
		{
			"fieldname": "session_mode",
			"label": "Session Mode (removed)",
			"fieldtype": "Data",
			"read_only": 1,
			"hidden": 1,
			"description": "Deprecated"
		},
		{
			"fieldname": "session_db",
			"label": "Session DB Path (removed)",
			"fieldtype": "Data",
			"read_only": 1,
			"hidden": 1,
			"description": "Deprecated"
		},
		{
			"fieldname": "api_key",
			"label": "OpenAI API Key",
			"fieldtype": "Password",
			"read_only": 1,
			"description": "Stored securely. Used only when 'Use this DocType for configuration' is enabled."
		},
		{
			"fieldname": "section_prompt",
			"label": "Prompt",
			"fieldtype": "Section Break"
		},
		{
			"fieldname": "instructions",
			"label": "Instructions",
			"fieldtype": "Long Text",
			"reqd": 0,
			"description": "System prompt used for the OpenAI Assistant (plain text, no HTML)"
		},
		{
			"fieldname": "section_whatsapp",
			"label": "WhatsApp Orchestration",
			"fieldtype": "Section Break"
		},
		{
			"fieldname": "wa_enable_reaction",
			"label": "Show reaction before AI processing (ðŸ¤–)",
			"fieldtype": "Check",
			"default": 1
		},
		{
			"fieldname": "wa_enable_autoreply",
			"label": "Enable auto-reply from AI",
			"fieldtype": "Check",
			"default": 1
		},
		{
			"fieldname": "wa_force_inline",
			"label": "Run inline when processing WhatsApp (dev)",
			"fieldtype": "Check",
			"default": 0
		},
		{
			"fieldname": "wa_human_cooldown_seconds",
			"label": "Human takeover cooldown (seconds)",
			"fieldtype": "Int",
			"default": 300
		},
		{
			"fieldname": "section_knowledge_base",
			"label": "Knowledge Base (PDF Context)",
			"fieldtype": "Section Break",
			"collapsible": 1
		},
		{
			"fieldname": "enable_pdf_context",
			"label": "Enable PDF Knowledge Base",
			"fieldtype": "Check",
			"default": 0,
			"description": "When enabled, AI will use Assistants API with file_search for RAG-based responses"
		},
		{
			"fieldname": "knowledge_pdf",
			"label": "Knowledge Base PDF",
			"fieldtype": "Attach",
			"depends_on": "eval:doc.enable_pdf_context==1",
			"description": "Upload PDF document (max 32MB, 10,000 pages). Content will be indexed in OpenAI Vector Store."
		},
		{
			"fieldname": "column_break_pdf",
			"fieldtype": "Column Break"
		},
		{
			"fieldname": "vector_store_id",
			"label": "Vector Store ID",
			"fieldtype": "Data",
			"read_only": 1,
			"depends_on": "eval:doc.enable_pdf_context==1",
			"description": "Auto-generated OpenAI Vector Store ID"
		},
		{
			"fieldname": "assistant_id",
			"label": "Assistant ID",
			"fieldtype": "Data",
			"read_only": 1,
			"depends_on": "eval:doc.enable_pdf_context==1",
			"description": "Auto-generated OpenAI Assistant ID for file_search"
		},
		{
			"fieldname": "pdf_uploaded_at",
			"label": "PDF Uploaded At",
			"fieldtype": "Datetime",
			"read_only": 1,
			"depends_on": "eval:doc.enable_pdf_context==1"
		},
		{
			"fieldname": "pdf_file_size_mb",
			"label": "PDF Size (MB)",
			"fieldtype": "Float",
			"read_only": 1,
			"precision": 2,
			"depends_on": "eval:doc.enable_pdf_context==1"
		}
	],
	"permissions": [
		{
			"role": "System Manager",
			"read": 1,
			"write": 1
		}
	]
} 